{"version":3,"sources":["webpack://src/./src/js/modules/forms.js","webpack://src/./src/js/modules/modal.js","webpack://src/./src/js/modules/phoneMask.js","webpack://src/./src/js/modules/tabs.js","webpack://src/./src/js/modules/timer.js","webpack://src/./src/js/modules/toTop.js","webpack://src/./src/js/modules/zoom.js","webpack://src/./src/js/script.js","webpack://src/./src/js/services/services.js","webpack://src/webpack/bootstrap","webpack://src/webpack/runtime/define property getters","webpack://src/webpack/runtime/hasOwnProperty shorthand","webpack://src/webpack/runtime/make namespace object","webpack://src/webpack/startup"],"names":[],"mappings":";;;;;;;;;;;;;AAAmC;AACW;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,4DAAQ;AACxB;AACA;AACA;;AAEA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA,aAAa;;AAEb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD,qDAAqD,QAAQ;AAC7D;AACA;AACA;AACA,gBAAgB,kDAAU;AAC1B,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA,+DAAe,KAAK,E;;;;;;;;;;;;;;AC9DpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;AACA,S;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,+DAAe,KAAK,EAAC;;;;;;;;;;;;ACzDrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,S;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,S;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA,+DAAe,SAAS,E;;;;;;;;;;;ACxCxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;;AAEA,+DAAe,IAAI,E;;;;;;;;;;;ACnCnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,IAAI;AAC3B,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,+DAAe,KAAK,E;;;;;;;;;;;ACrDpB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;;AAEH;;AAEA;;AAEA;AACA;AACA;AACA,O;AACA;AACA;;AAEA,+DAAe,KAAK,E;;;;;;;;;;;ACzBpB,eAAe,+EAA+E;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA+B,aAAa;AAC5C,+BAA+B,aAAa,KAAK,cAAc;AAC/D;AACA;AACA,uC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA,wB;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,4B;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;AAEA,+DAAe,IAAI,E;;;;;;;;;;;;;;;;;;ACxEe;AACE;AACA;AACF;AACU;AACR;AACA;;AAEpC;AACA,GAAG,sDAAI;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG,uDAAK;AACR,GAAG,uDAAK;AACR,GAAG,sDAAI;AACP;AACA,GAAG,2DAAS;AACZ,GAAG,uDAAK;AACR,GAAG,uDAAK;AACR,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1BD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;;;;;;;;UCTA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCrBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,6CAA6C,wDAAwD,E;;;;;WCArG;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;UCNA;UACA;UACA;UACA","file":"bundle.js","sourcesContent":["import {closeModal} from './modal';\r\nimport {postData} from '../services/services';\r\nfunction forms(form){\r\n    const forms = document.querySelectorAll(form),\r\n          message = {\r\n            loading: 'icons/spinner.svg',\r\n            success: 'Спасибо! Скоро мы с вами свяжемся',\r\n            failure: 'Что-то пошло не так...',\r\n            error: 'Некорректный номер телефона'\r\n    };\r\n    \r\n    forms.forEach(item => {\r\n        bindPostData(item);\r\n    });\r\n    function bindPostData(form) {\r\n        form.addEventListener('submit', (e) => {\r\n            e.preventDefault();\r\n            let statusMessage = document.createElement('img');\r\n                statusMessage.src = message.loading;\r\n                statusMessage.classList.add('overlay__spiner');\r\n                \r\n            form.insertAdjacentElement('afterend', statusMessage);\r\n            const formData = new FormData(form);\r\n            const json = JSON.stringify(Object.fromEntries(formData.entries()));\r\n                postData('mailer/smart.php',json)\r\n            .then(() => {\r\n                showThanksModal(message.success);\r\n                statusMessage.remove();\r\n               \r\n            }).catch(() => {\r\n                showThanksModal(message.failure);\r\n                statusMessage.remove();\r\n            }).finally(() => {\r\n                form.reset();\r\n            });\r\n            \r\n        });\r\n    }\r\n    function showThanksModal(message){\r\n        const modalPrev = document.querySelector('.overlay__form');\r\n        document.querySelector('.overlay').classList.add('overlay_active');\r\n        modalPrev.classList.add('hide');\r\n        let modalThanks = document.createElement('div');\r\n        modalThanks.classList.add('form','form_min','overlay__form');\r\n        modalThanks.innerHTML = `\r\n        <div class=\"modal__content\">\r\n            <div class=\"overlay__modal-close\">&times;</div>\r\n            <div class=\"form-title overlay__title\">${message}</div>\r\n        </div>`;\r\n        document.querySelector('.overlay__modal').append(modalThanks);\r\n        setTimeout(() => {\r\n                closeModal('.overlay','overlay_active');\r\n        }, 2500);\r\n        setTimeout(() => {\r\n            modalThanks.remove();\r\n            modalPrev.classList.add('show');\r\n            modalPrev.classList.remove('hide');\r\n        },4000);\r\n    }\r\n\r\n}\r\n\r\nexport default forms;","function closeModal(modalOverlay,activeClass){\r\n    const overlay = document.querySelector(modalOverlay);\r\n    overlay.classList.remove(activeClass);\r\n    document.body.style.overflow = '';\r\n}\r\nfunction modal(overlay,activeClass){\r\n    const modalMessages = {\r\n        call:{\r\n            title:'Закажите сейчас',\r\n            subtitle:'обратный звонок'\r\n        },\r\n        measuring:{\r\n            title:'Запишитесь сегодня на',\r\n            subtitle:'бесплатный замер'\r\n        },\r\n        calculate:{\r\n            title:'Рассчитать стоимость',\r\n            subtitle:'со скидкой'\r\n        }\r\n      }, \r\n      modalOverlay = document.querySelector(overlay);\r\n     \r\n    function openModal(selector, messageArr){\r\n        const elems = document.querySelectorAll(selector),\r\n            title = document.querySelector('.overlay__title'),\r\n            subtitle = document.querySelector('.overlay__subtitle');\r\n        elems.forEach(item => {\r\n            item.addEventListener('click',(event) => {\r\n                event.preventDefault();\r\n                modalOverlay.classList.add(activeClass);\r\n                document.body.style.overflow = 'hidden';\r\n                title.innerHTML = messageArr.title;\r\n                subtitle.innerHTML = messageArr.subtitle;\r\n            });\r\n        });\r\n    }\r\n  \r\n    modalOverlay.addEventListener('click',(event) => {\r\n        if (event.target.classList.contains('overlay__modal-close')){\r\n            closeModal(overlay,activeClass);\r\n        } \r\n    });\r\n    document.addEventListener('keydown',(event) => {\r\n        if (event.code == 'Escape'){\r\n            closeModal(overlay,activeClass);\r\n        }\r\n    });\r\n    modalOverlay.addEventListener('click',(event) => {\r\n        if (event.target.classList.contains('overlay')){\r\n            closeModal(overlay,activeClass);\r\n        }\r\n    });\r\n    openModal('[data-measuring]', modalMessages.measuring);\r\n    openModal('[data-call]', modalMessages.call);\r\n    openModal('[data-calculate]', modalMessages.calculate);\r\n}\r\n\r\nexport default modal;\r\nexport {closeModal};","function phoneMask(inputsSelector){\r\n   function setCursorPosition(pos, elem) {\r\n    elem.focus();\r\n    if (elem.setSelectionRange) elem.setSelectionRange(pos, pos);\r\n    else if (elem.createTextRange) {\r\n        var range = elem.createTextRange();\r\n        range.collapse(true);\r\n        range.moveEnd('character', pos);\r\n        range.moveStart('character', pos);\r\n        range.select();\r\n    }\r\n    }\r\n    function mask(event) {\r\n        let matrix = '+7 (___) ___ ____',\r\n            i = 0,\r\n            def = matrix.replace(/\\D/g, \"\"),\r\n            val = this.value.replace(/\\D/g, \"\");\r\n        if (def.length >= val.length){\r\n            val = def;\r\n        } \r\n        this.value = matrix.replace(/./g, function(a) {\r\n            return /[_\\d]/.test(a) && i < val.length ? val.charAt(i++) : i >= val.length ? \"\" : a;\r\n        });\r\n        if (event.type == 'blur') {\r\n            if (this.value.length == 2) {\r\n                this.value = \"\";\r\n            }\r\n        } else {\r\n            setCursorPosition(this.value.length, this);\r\n        } \r\n    }\r\n    const inputs = document.querySelectorAll(inputsSelector);\r\n    inputs.forEach(item => {\r\n        item.addEventListener('blur', mask, false);\r\n        item.addEventListener('input', mask, false);\r\n        item.addEventListener('focus', mask, false);\r\n    });\r\n   \r\n}\r\n\r\nexport default phoneMask;","function tabs(tabsParentSelector, tabsSelector, contentSelector, \r\n    linksActiveClass, contentActiveClass){\r\n    const tabsParent = document.querySelector(tabsParentSelector),\r\n          tabsLinks = tabsParent.querySelectorAll(tabsSelector),\r\n          tabsContent = document.querySelectorAll(contentSelector);\r\n\r\n    function removeActiveClass(){\r\n        tabsLinks.forEach(item => {\r\n            item.classList.remove(linksActiveClass);\r\n        });\r\n        tabsContent.forEach(item => {\r\n            item.classList.remove(contentActiveClass);\r\n        });\r\n    }\r\n    function addActiveClass(i=0){\r\n        tabsLinks[i].classList.add(linksActiveClass);\r\n        tabsContent[i].classList.add(contentActiveClass,'fade');\r\n    }\r\n    removeActiveClass();\r\n    addActiveClass();\r\n        \r\n    tabsParent.addEventListener('click',(event) => {\r\n        event.preventDefault();\r\n        let target = event.target;\r\n        if(target == target && target.classList.contains(tabsSelector.slice(1))){\r\n            tabsLinks.forEach((item, i) => {\r\n                if (target == item) {\r\n                    removeActiveClass();\r\n                    addActiveClass(i);\r\n                }\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nexport default tabs;","function timer(timerSelector, deadLine){\r\n    function getTimeRemaining(endTime){\r\n        let timeDiff = Date.parse(endTime) - Date.parse(new Date()),\r\n            days = Math.floor(timeDiff / (1000 * 60 * 60 *24)),\r\n            hours = Math.floor((timeDiff / (1000 * 60 *60)) % 24),\r\n            minutes = Math.floor((timeDiff /(1000 * 60)) % 60),\r\n            seconds = Math.floor((timeDiff / 1000) % 60);\r\n\r\n        return {\r\n            total: timeDiff,\r\n            days:days,\r\n            hours:hours,\r\n            minutes:minutes,\r\n            seconds:seconds\r\n        };\r\n    }\r\n\r\n    function addZero(num){\r\n        if (num>=0 && num<=9) {\r\n            return `0${num}`;\r\n        } else {\r\n            return num;\r\n        }\r\n    }\r\n    \r\n    function setClock(selector, endTime){\r\n        const timer = document.querySelector(selector),\r\n                days = timer.querySelector('.timer__days'),\r\n                hours = timer.querySelector('.timer__hours'),\r\n                minutes = timer.querySelector('.timer__minutes'),\r\n                seconds = timer.querySelector('.timer__seconds'),\r\n                timeInterval = setInterval(updateClock, 1000);\r\n        \r\n        updateClock();\r\n                \r\n        function updateClock(){\r\n            const timeObj = getTimeRemaining(endTime);\r\n\r\n            days.innerHTML = addZero(timeObj.days);\r\n            hours.innerHTML = addZero(timeObj.hours);\r\n            minutes.innerHTML = addZero(timeObj.minutes);\r\n            seconds.innerHTML = addZero(timeObj.seconds);\r\n\r\n            if (timeObj.total <= 0){\r\n                clearInterval(timeInterval);\r\n            }\r\n        }\r\n               \r\n    }\r\n\r\n    setClock(timerSelector, deadLine);\r\n}\r\n\r\nexport default timer;","function toTop(btnSelector, activeClass){\r\n    const btn = document.querySelector(btnSelector);\r\n\r\n  document.addEventListener('scroll', () => {\r\n      let scrolled = window.pageYOffset;\r\n      let coords = document.documentElement.clientHeight;\r\n\r\n      if (scrolled > coords ){\r\n          btn.classList.add(activeClass);\r\n      } else {\r\n          btn.classList.remove(activeClass);\r\n      }\r\n  });\r\n\r\n  btn.addEventListener('click', backToTop);\r\n  \r\n  function backToTop() {\r\n      \r\n      if (window.pageYOffset > 0) {\r\n          window.scrollBy(0,-80);\r\n          setTimeout(backToTop,0);\r\n      } \r\n  }\r\n}\r\n\r\nexport default toTop;","function zoom({img,closeBtn,overlay,imgWindow,arrowRight,arrowLeft,counter,overlayActiveClass}){\r\n    const images = document.querySelectorAll(img),\r\n          closeImg = document.querySelector(closeBtn),\r\n          imagesOverlay = document.querySelector(overlay),\r\n          imgFrame = document.querySelector(imgWindow),\r\n          arrowNext = document.querySelector(arrowRight),\r\n          arrowLast = document.querySelector(arrowLeft),\r\n          slidesCount = document.querySelector(counter);\r\n    \r\n    let slideIndex = 0,\r\n    width = window.getComputedStyle(document.body).width;\r\n    width = +width.slice(0,width.length-2);\r\n\r\n    function closeOverlay(){\r\n    imagesOverlay.classList.remove(overlayActiveClass);\r\n    document.body.style.overflow = '';\r\n    }\r\n    function changeSlide(){\r\n    imgFrame.src = `img/work/${slideIndex+1}.jpg`;\r\n    slidesCount.innerHTML = `${slideIndex+1} / ${images.length}`;\r\n    }\r\n    function showNextSlide(){\r\n    if (slideIndex == images.length-1){ \r\n        slideIndex = 0;\r\n    } else {\r\n        slideIndex++;\r\n    }\r\n    changeSlide();\r\n    }\r\n    function showPreviousSlide(){\r\n    if (slideIndex == 0){\r\n        slideIndex = images.length-1;\r\n    } else {\r\n        slideIndex--;\r\n    }\r\n    changeSlide();\r\n    }\r\n    closeImg.addEventListener('click',() => {\r\n    closeOverlay();\r\n    });\r\n    document.addEventListener('keydown',(event) => {\r\n    if (event.code == 'Escape'){\r\n        closeOverlay();\r\n    }\r\n    });\r\n    images.forEach((item,i) => {\r\n    if (width > 576){\r\n        item.addEventListener('click',(event) => {\r\n            if(event.target.closest(img)){\r\n                imagesOverlay.classList.add(overlayActiveClass);\r\n                document.body.style.overflow = 'hidden';\r\n                slideIndex = i;\r\n                changeSlide();\r\n            }\r\n        });\r\n    }\r\n    });\r\n    arrowLast.addEventListener('click',() => {\r\n    showPreviousSlide();      \r\n    });\r\n    arrowNext.addEventListener('click',() => {\r\n    showNextSlide();\r\n    });\r\n    document.addEventListener('keydown',(event) =>{\r\n    if (event.code == 'ArrowLeft'){\r\n        showPreviousSlide();  \r\n    }else if (event.code == 'ArrowRight'){\r\n        showNextSlide();\r\n    }\r\n    });\r\n}\r\n\r\nexport default zoom;","import zoom from './modules/zoom';\r\nimport toTop from './modules/toTop';\r\nimport timer from './modules/timer';\r\nimport tabs from './modules/tabs';\r\nimport phoneMask from './modules/phoneMask';\r\nimport modal from './modules/modal';\r\nimport forms from './modules/forms';\r\n\r\ndocument.addEventListener('DOMContentLoaded',() => {\r\n   zoom({\r\n        img:'.works__item',\r\n        closeBtn:'.works__close',\r\n        overlay:'.works__overlay',\r\n        imgWindow:'.works__zoom img',\r\n        arrowRight:'.works__right-arrow',\r\n        arrowLeft:'.works__left-arrow',\r\n        counter:'.works__count',\r\n        overlayActiveClass:'works__overlay_active'\r\n   });\r\n   toTop('.up-btn', 'up-btn_active');\r\n   timer('.stock__timer', '2021-01-01');\r\n   tabs('.balkon__tabs', '.balkon__link', '.balkon__content-block',\r\n        'balkon__link_active', 'balkon__content-block_active');\r\n   phoneMask('[data-phone]');\r\n   modal('.overlay','overlay_active');\r\n   forms('form');\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","const postData = async (url, data) => {\r\n    const result = await fetch(url, {\r\n        method: 'POST',\r\n        headers:{\r\n            'Content-type':'application/json'\r\n        },\r\n        body:data\r\n    });\r\n    return await result;\r\n};\r\n\r\nexport {postData};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module\n__webpack_require__(\"./src/js/script.js\");\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}